<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="header_helpdesk" inherit_id="website_portal.portal_layout" name="HelpDesk Portal">
        <xpath expr="//ul[contains(@class,'o_portal_submenu')]" position="inside">
            <li>
                <a href="/my/helpdesk/ticket" class="navbar-brand">Helpdesk Ticket</a>
            </li>
        </xpath>
    </template>
    <template id="portal_ticket_submit" name="My Helpdesk">
        <t t-call="website_portal.portal_layout">
            <div class="alert alert-success">
                <strong>Success!</strong> Your Ticket is Successfully Submitted.
            </div>
        </t>
    </template>
    <template id="portal_my_helpdesk" name="My Helpdesk">
        <t t-call="website_portal.portal_layout">
            <html>
                <head>
                    <style>
                        * {
                        box-sizing: border-box;
                        }

                        input[type=text], select, textarea {
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ccc;
                        border-radius: 4px;
                        resize: vertical;
                        }

                        label {
                        padding: 12px 12px 12px 0;
                        display: inline-block;
                        }

                        input[type=submit] {
                        background-color: #4CAF50;
                        color: white;
                        padding: 12px 20px;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                        float: right;
                        }

                        input[type=submit]:hover {
                        background-color: #45a049;
                        }

                        .container {
                        border-radius: 5px;
                        padding: 10px;
                        }

                        .col-25 {
                        float: left;
                        width: 25%;
                        margin-top: 6px;
                        }

                        .col-75 {
                        float: left;
                        width: 75%;
                        margin-top: 6px;
                        }

                        /* Clear floats after the columns */
                        .row:after {
                        content: "";
                        display: table;
                        clear: both;
                        }

                        /* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */
                        @media screen and (max-width: 600px) {
                        .col-25, .col-75, input[type=submit] {
                        width: 100%;
                        margin-top: 0;
                        }
                        }
                    </style>
                </head>
                <body>
                    <center><h3 style="margin-top: 0px;">Helpdesk Ticket</h3></center>
                    <div class="container">
                        <form action="/helpdesk/submit/ticket" method="post"  class="o_website_form form-horizontal container-fluid" enctype="multipart/form-data">
                            <div class="row">
                                <div class="col-25">
                                    <label for="lsubject">Subject</label>
                                </div>
                                <div class="col-75">
                                    <input type="text" id="subject" name="tsubject" placeholder="Subject" required="required"/>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-25">
                                    <label for="lcustomer">Customer</label>
                                </div>
                                <div class="col-75">
                                    <input type="text" id="customer" name="customer" placeholder="Customer" t-attf-value="#{user.partner_id.name or ''}"  disabled="true"/>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-25">
                                    <label for="lttype">Ticket Type</label>
                                </div>
                                <div class="col-75">
                                    <select id="ttype" name="ttype" required="required">
                                        <option value="">Ticket Type...</option>
                                        <t t-foreach="ticket_type" t-as="tt">
                                            <option t-att-value="tt.id">
                                                <t t-esc="tt.name" />
                                            </option>
                                        </t>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-25">
                                    <label for="llocation">Location</label>
                                </div>
                                <div class="col-75">
                                    <select id="location" name="location" required="required">
                                        <option value="">Location...</option>
                                        <t t-foreach="location" t-as="l">
                                            <option t-att-value="l.id">
                                                <t t-esc="l.name" />
                                            </option>
                                        </t>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-25">
                                    <label for="lfacility">Facility</label>
                                </div>
                                <div class="col-75">
                                    <select id="facility" name="facility" required="required">
                                        <option value="">Facility...</option>
                                        <t t-foreach="facility" t-as="f">
                                            <option t-att-value="f.id" t-att-location="f.location_id.id">
                                                <t t-esc="f.name" />
                                            </option>
                                        </t>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-25">
                                    <label for="subject">Description</label>
                                </div>
                                <div class="col-75">
                                    <textarea id="description" name="description" placeholder="Write something.." required="required" style="height:200px"></textarea>
                                </div>
                            </div>
                            <div class="row">
                                <input type="submit" value="Submit"/>
                            </div>
                        </form>
                    </div>
                </body>
            </html>
        </t>
    </template>
</odoo>