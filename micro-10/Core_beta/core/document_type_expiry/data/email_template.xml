<?xml version="1.0" encoding="UTF-8"?>
<odoo>
<data noupdate="0">
        <!--Email template for document expire-->
        <record id="email_template_edi_document_expire" model="mail.template">
            <field name="name">Document Expire- Send by Email</field>
            <!--field name="email_from">${(object.user_id.email and '%s &lt;%s&gt;' % (object.user_id.name, object.user_id.email) or '')|safe}</field-->
            <field name="email_from">${ctx['email_from']|safe}</field>
            <field name="subject">Expiring Document List</field>
            <!--field name="partner_to">${object.partner_id.id}</field-->
            <field name="email_to">${ctx['email_to']|safe}</field>
            <!--field name="email_to">${(object.user_id.email and '%s &lt;%s&gt;' % (object.user_id.name, object.user_id.email) or '')|safe}</field-->
            <field name="model_id" ref="document_type_expiry.model_document_expire_cron"/>
            <field name="auto_delete" eval="True"/>
            <!--field name="report_template" ref="report_sale_order"/>
            <field name="report_name">${(object.name or '').replace('/','_')}${object.state == 'draft' and '_draft' or ''}</field-->
            <!--field name="lang">${object.partner_id.lang}</field-->
            <field name="body_html"><![CDATA[
<p>Dear ${ctx['user_name']|safe},
<p>
The following documents are expiring:
    
</p>
<table width="100%" border="1">
    <tr>
        <th>Employee</th>
        <th>Document Type</th>
        <th>Documents</th>
        <th>Expiry Date</th>
    </tr>
    % for line in ctx["document_list"]:
    <tr>
        <td>${line['employee']}</td>
        <td>${line['document_type']}</td>
        <td>${line['document']}</td>
        <td>${line['expire_date']}</td>
    </tr>
    % endfor
</table>
    <br/><br/>

]]></field>
        </record>
</data>

</odoo>
