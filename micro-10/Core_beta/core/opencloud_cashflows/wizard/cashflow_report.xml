<?xml version="1.0"?>
<openerp>
<data>

	<record id="cashflow_report_wizard_view" model="ir.ui.view">
				<field name="name">Cashflow Report Wizard</field>
				<field name="model">cashflow.wizard</field>
				<field name="type">form</field>
				<field name="arch" type="xml">
						<form string="Relatório de Cashflow">
							<group colspan="4" col="4">
								<field name="data_inicio"/>
								<field name="data_fim"/>
								<br/>
								<newline/>
								<field name="journal_id"/>
							</group>
								<footer>
										<button icon="gtk-execute" name="open_view_cashflow_reports" string="Abrir Gráfico" type="object" colspan="2"/>
										<button string="Cancelar" class="oe_link" special="cancel"/>
								</footer>
						</form>
				</field>
		</record>

		<record id="cashflow_report_wizard_action" model="ir.actions.act_window">
				<field name="name">Cashflow Report </field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">cashflow.wizard</field>
				<field name="view_type">form</field>
				<field name="view_mode">form</field>
				<field name="view_id" ref="cashflow_report_wizard_view"/>
				<field name="target">new</field>
		</record>
		
		<record id="cashflow_report_wizard_action_website" model="ir.actions.act_url">
				<field name="name">Cashflow Report Website</field>
				<field name="type">ir.actions.act_url</field>
				<field name="url" >/cashflows</field>
				<field name="target">new</field>
		</record>

		<menuitem name="Relatório de Cashflows" parent="account.menu_account_reports" id="cashflow_report_wizard_menu" action="cashflow_report_wizard_action_website" sequence="22"/>

		<!-- nova tabela preenchida para poder exportar para excel -->

		<record id="cashflow_report_tree_view" model="ir.ui.view">
				<field name="name">Relatório de Cashflow Tree</field>
				<field name="model">cashflow.report</field>
				<field name="arch" type="xml">
					<tree string="Relatório de Cashflows" create="0" delete="0" fonts="bold: date in ('Total - €', 'Média/Dia - €', 'Projeção/Dia - €', 'Tendência - %')" colors="green:entrada &gt; 0.0; red:saida &gt; 0.0">
								<field name="name"/>
								<field name="entrada" widget="monetary" sum="Total Entradas"/>
								<field name="saida" widget="monetary" sum="Total Saídas"/>
								<field name="date"/>
								<field name="journal_id"/>
								<field name="invoice_id"/>
								<field name="move_id"/>
								<field name="account_id"/>
								<field name="partner_id"/>
								<field name="tipo"/>
								<field name="saldo"/>
					 </tree>
				</field>
		</record>
		
		<record id="cashflow_report_tree_view_graph3" model="ir.ui.view">
				<field name="name">Relatório de Cashflow Tree</field>
				<field name="model">cashflow.report</field>
				<field name="arch" type="xml">
					<tree string="Relatório de Cashflows" create="0" delete="0" fonts="bold: date in ('Total - €', 'Média/Dia - €', 'Projeção/Dia - €', 'Tendência - %')" colors="green:entrada &gt; 0.0; red:saida &gt; 0.0">
								<field name="date"/>
								<field name="account_id"/>
								<field name="name"/>
								<field name="journal_id"/>
								<field name="entrada" widget="monetary" sum="Total Entradas"/>
								<field name="saida" widget="monetary" sum="Total Saídas"/>
								<field name="saldo" widget="monetary" sum="Total Saldo"/>
					 </tree>
				</field>
		</record>
		
		
		
		<record id="cashflow_report_tree_view_simplified" model="ir.ui.view">
				<field name="name">Relatório de Cashflow Tree Simplified</field>
				<field name="model">cashflow.report</field>
				<field name="arch" type="xml">
					<tree string="Relatório de Cashflows" create="0" delete="0" fonts="bold: date in ('Total - €', 'Média/Dia - €', 'Projeção/Dia - €', 'Tendência - %')" colors="green:entrada &gt; 0.0; red:saida &gt; 0.0">
								<field name="date"/>
								<field name="entrada" widget="monetary" sum="Total Entradas"/>
								<field name="saida" widget="monetary" sum="Total Saídas"/>
								<field name="saldo" widget="monetary" sum="Total Saldo"/>
					 </tree>
				</field>
		</record>

		<record id="cashflow_report_graph_view" model="ir.ui.view">
				<field name="name">Relatório de Cashflow Graph</field>
				<field name="model">cashflow.report</field>
				<field name="arch" type="xml">
						 <graph string="elatório de Cashflows" type="bar" > 
								<field name="date" group="True" interval="day"/>
								<field name="tipo" group="True" />
								<field name="saida" operator="+"/>
								<field name="entrada" operator="+"/>
								<field name="saldo" operator="+"/>
						</graph>
				</field>
		</record>
		
		<record id="cashflow_report_graph_view_pivot" model="ir.ui.view">
				<field name="name">Relatório de Cashflow Graph</field>
				<field name="model">cashflow.report</field>
				<field name="arch" type="xml">
						 <graph string="elatório de Cashflows" type="pivot" > 
								<field name="date" group="True" interval="day"/>
								<field name="tipo" group="True" />
								<field name="saida" />
								<field name="entrada" />
								<field name="saldo" />
						</graph>
						<!-- <graph string="Leads Analysis" type="pivot" stacked="True">
                   	<field name="date" type="row"/>
                   	<field name="tipo" type="col"/>
                   	<field name="planned_revenue" type="measure"/>
             		</graph> -->
				</field>
		</record>
		
		<record id="cashflow_report_search_view" model="ir.ui.view">
            <field name="name">cashflow_report_search_view</field>
            <field name="model">cashflow.report</field>
            <field name="arch" type="xml">
                <search string="Search Invoice">
                    <field name="name" string="Descrição" filter_domain="[('name','ilike',self)"/>
                    <filter name="entrada" string="Entradas" domain="[('entrada','&gt;',0.0)]" />
                    <filter name="saida" string="Saídas" domain="[('saida','&gt;',0.0)]" />
						  <separator/>
                    <filter name="invoice_id" string="Faturas" domain="[('invoice_id','!=',False)]" />
                    <filter name="move_id" string="Movimentos" domain="[('move_id','!=',False)]" />
                    <separator/>
                    <group expand="0" string="Group By">
                    		<filter name="group_by_partner_id" string="Partner" context="{'group_by':'partner_id'}"/>
                     	<filter name="group_by_date" string="Data" context="{'group_by':'date:day'}" />
                     	<filter name="group_by_tipo" string="Tipo" context="{'group_by':'tipo'}"/>
                     	<filter name="group_by_saldo" string="Saldo" context="{'group_by':'saldo'}"/>
                    </group>
               </search>
            </field>
        </record>

		<record id="cashflow_report_action" model="ir.actions.act_window">
				<field name="name">Relatório de Cashflow</field>
						<field name="res_model">cashflow.report</field>
						<field name="type">ir.actions.act_window</field>
						<field name="view_type">form</field>
						<field name="view_mode">tree,graph</field>
						<field name="view_id" ref="cashflow_report_tree_view"/>
		</record>
		
		
</data>
</openerp>
