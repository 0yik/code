<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-extend="Orderline" >
        <t t-jquery="span.product-name" t-operation="replace">
            <span class="product-name">
                <t t-esc="line.get_product().display_name"/>
                <t t-if="line.get_product().tracking!=='none' and widget.pos.config.enable_pos_serial">
                    <i t-attf-class="oe_link_icon fa fa-trash oe_icon #{line.has_valid_product_lot() ? 'oe_del' : 'oe_del_off' }"/>
                    <i style="float:right;" t-attf-class="oe_link_icon fa fa-list oe_icon line-lot-icon #{line.has_valid_product_lot() ? 'oe_green' : 'cust_red' }"/>
                </t>
                <t t-if="line.get_product().tracking!=='none' and !widget.pos.config.enable_pos_serial">
                    <i t-attf-class="oe_link_icon fa fa-list oe_icon line-lot-icon #{line.has_valid_product_lot() ? 'oe_green' : 'oe_red' }"/>
                </t>
            </span>
        </t>
    </t>
    
    <t t-extend="PackLotLinePopupWidget">
        <t t-jquery="div.modal-dialog" t-operation="replace">
            <t t-if="widget.pos.config.enable_pos_serial">
                <div class="modal-dialog">
		            <div class="popup popup-text" style="height:645px;width: 900px;left: 415px;padding-left: 14px;">
		                <p class="title"><t t-esc=" widget.options.title || '' " /></p>
		                <t t-if="widget.options.serials and widget.options.serials.length > 0">
			                <table style="margin-top: 14px;margin-left: 88px;">
			                  <td>
	                                <input style="border-radius: 20px;" class="popup-search" type="text" placeholder="Search Lot/Serial" />
			                  </td>
			                </table>
			            </t>
						<t t-if="widget.options.serials and widget.options.serials.length > 0">
							<div style="margin-top: 15px;float:left;height:250px;font-size:15px ">
                                    <table style="width: 443px;" id="lot_list">
	                                    <thead>
	                                        <tr style="border-bottom: 3px solid #555555;">
	                                           <th align="left" >Serial</th>
	                                           <th align="center" >Qty</th>
	                                           <th align="center" colspan="2">Add Qty</th>
	                                        </tr>
	                                    </thead>
	                                    <tbody class='serial-list-contents'></tbody>
	                                </table>
								<div id="pagination" style="margin-top: 15px;">
				                     <div><button class="btn btn-danger" id="first"><i class="fa fa-angle-double-left fa-lg"></i></button></div>
				                     <div><button class="btn btn-danger" id="previous"></button></div>
				                     <div><span class="text" id="text"></span></div>
				                     <div><button class="btn btn-danger" id="next"></button></div>
				                     <div><button class="btn btn-danger" id="last"><i class="fa fa-angle-double-right fa-lg"></i></button></div>
				                </div>
							</div>
						</t>
		                <div class='packlot-lines' style="height:400px">
		                    <t t-if="widget.options.pack_lot_lines">
		                        <t t-set="focus_lot_line" t-value="widget.focus_model || widget.options.pack_lot_lines.get_empty_model()"/>
		                        <t t-foreach='widget.options.pack_lot_lines.models' t-as='lot_line'>
		                            <input type="text" t-att-cid="lot_line.cid"
		                                t-att-value="lot_line.get('lot_name')"
		                                t-att-autofocus="lot_line === focus_lot_line ? 'autofocus': undefined"
		                                class="popup-input packlot-line-input"
		                                placeholder="Serial/Lot Number" style="width: 70%;"/>
		                            <i class="oe_link_icon remove-lot fa fa-trash-o" style="color: red;"></i>
		                        </t>
		                    </t>
		                </div>
		                <div class="footer">
		                    <div class="button confirm">
		                        Ok
		                    </div>
		                    <div class="button cancel">
		                        Remove All
		                    </div>
		                </div>
		            </div>
		        </div>
            </t>
            <t t-if="!widget.pos.config.enable_pos_serial">
                <div class="modal-dialog">
                    <div class="popup popup-text">
                        <p class="title"><t t-esc=" widget.options.title || '' " /></p>
                        <div class='packlot-lines'>
                            <t t-if="widget.options.pack_lot_lines">
                                <t t-set="focus_lot_line" t-value="widget.focus_model || widget.options.pack_lot_lines.get_empty_model()"/>
                                <t t-foreach='widget.options.pack_lot_lines.models' t-as='lot_line'>
                                    <input type="text" t-att-cid="lot_line.cid"
                                        t-att-value="lot_line.get('lot_name')"
                                        t-att-autofocus="lot_line === focus_lot_line ? 'autofocus': undefined"
                                        class="popup-input packlot-line-input"
                                        placeholder="Serial/Lot Number"/>
                                    <i class="oe_link_icon remove-lot fa fa-trash-o"></i>
                                </t>
                            </t>
                        </div>
                        <div class="footer">
                            <div class="button confirm">
                                Ok
                            </div>
                            <div class="button cancel">
                                Cancel
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </t>
    
    <t t-name="listLine">
        <t t-if="serial.life_date">
	        <t t-if="moment(new moment().add(widget.pos.config.product_exp_days, 'd').format('YYYY-MM-DD HH:mm:mm')).format('DD/MM/YYYY') &gt;= moment(serial.life_date).format('DD/MM/YYYY')">
		        <tr t-att-data="serial.name" style="height: 30px;font-weight: normal;background: lightgray;" class="select-lot">
			        <td align="left"><t t-esc="serial.name"/></td>
			        <td><t t-esc="serial.remaining_qty"/></td>
			        <td>
			           <input style="padding:0px;font-size: 16px;height: 30px;min-height: 0px;width: 48px;text-align: center" t-att-id="serial.id" value="1" disabled="disabled"/>
			        </td>
			        <td style="font-size: 30px;padding-left: 10px;">
			          <i class="fa fa-info-circle" aria-hidden="true" style="color: #6ec89b;" t-att-title="'Product will expired on ' + moment(serial.life_date).format('YYYY-MM-DD')"></i>
			        </td>
		        </tr>
		    </t>
		    <t t-if="moment(new moment().add(widget.pos.config.product_exp_days, 'd').format('YYYY-MM-DD HH:mm:mm')).format('DD/MM/YYYY') &lt;= moment(serial.life_date).format('DD/MM/YYYY')">
		        <tr t-att-data="serial.name" style="height: 30px;font-weight: normal;" class="select-lot">
	                <td align="left"><t t-esc="serial.name"/></td>
	                <td><t t-esc="serial.remaining_qty"/></td>
	                <td>
	                   <input style="padding:0px;font-size: 16px;height: 30px;min-height: 0px;width: 48px;text-align: center" t-att-id="serial.id" value="1"/>
	                </td>
	                <td style="font-size: 30px;padding-left: 10px;">
	                  <i style="cursor: pointer;color: #6EC89B;" t-att-data="serial.name" class="fa fa-plus-square" aria-hidden="true"></i>
	                </td>
		        </tr>
		    </t>
	    </t>
	    <t t-if="!serial.life_date">
	        <tr t-att-data="serial.name" style="height: 30px;font-weight: normal;" class="select-lot">
                <td align="left"><t t-esc="serial.name"/></td>
                <td><t t-esc="serial.remaining_qty"/></td>
                <td>
                   <input style="padding:0px;font-size: 16px;height: 30px;min-height: 0px;width: 48px;text-align: center" t-att-id="serial.id" value="1"/>
                </td>
                <td style="font-size: 30px;padding-left: 10px;">
                  <i style="cursor: pointer;color: #6EC89B;" t-att-data="serial.name" class="fa fa-plus-square" aria-hidden="true"></i>
                </td>
            </tr>
	    </t>
    </t>
    
    <t t-extend="PaymentScreenWidget">
        <t t-jquery="div.paymentmethods-container" t-operation="before">
            <div style="padding-left: 15px;">
                <table style="width:100%">
                    <tr>
                        <td style="padding:5px;">
                            <input type="checkbox" checked="checked" name="is_ereciept" id='is_ereciept'/>
                            <span style="font-size: 16px;margin-left: 10px;">Print Serial On Receipt</span>
                        </td>
                    </tr>
                </table>
            </div>
        </t>
    </t>
    
    <t t-extend="PosTicket">
        <t t-jquery="[t-esc='orderline.get_product().display_name']" t-operation="append">
            <t t-if="orderline.lots and orderline.is_print_serial()">
                <div class="pos-disc-font">
                    <t t-esc="orderline.lots"/>
                </div>
            </t>
        </t>
    </t>
    
    <t t-extend="XmlReceipt">
        <t t-jquery="[t-if='!simple']" t-operation="after">
            <t t-if='line.serials and line.is_print'>
                <div align='left' font='b'>
                    <t t-esc='line.serials' />
                </div>
            </t>
        </t>
    </t>
    
</templates>