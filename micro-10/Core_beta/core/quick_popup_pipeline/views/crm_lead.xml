<?xml version="1.0"?>
<odoo>

        <record id="view_create_opportunity_simplified_hm" model="ir.ui.view">
            <field name="name">crm.lead.form.simple.hm</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.view_create_opportunity_simplified"/>
            <field name="arch" type="xml">
                <xpath expr="//sheet" position="replace">
                    <group col="4">
                        <field name="name" string="Opportunity Title" placeholder="e.g. Customer Deal"/>
                        <field name="date_action"/>
                        <field name="partner_id"/>
                        <field name="next_activity_id"/>
                        <field name="email_from" />
                        <field name="title_action"/>
                        <field name="phone"/>
                        <label for="planned_revenue"/>
                        <div class="o_row">
                            <field name="planned_revenue"/>
                            <field name="company_currency" options="{'no_create': True, 'no_open': True}"/>
                        </div>
                        <field name="priority" widget="priority"/>
                        <field name="stage_id" required="1"/>
                    </group>
                    <notebook>
                        <page name="description" string="Internal Notes">
                            <field name="description"/>
                        </page>
                        <page name="meetings" string="Meetings">
                            <field name="meeting_ids" context="{'search_default_opportunity_id': id, 'default_opportunity_id': id, 'default_name': name,'default_start':date_action,'default_stop':date_action}">
                                <tree string="Meetings" editable="botttom">
					                <field name="name" string="Subject"/>
					                <field name="allday" invisible="True"/>
					                <field name="start" string="Start Date"/>
					                <field name="stop" string="End Date"/>
					                <field name="partner_ids" widget="many2many_tags"/>
					                <field name="location"/>
					                <field name="state" invisible="True"/>
					                <field name="duration"/>
					                <field name="message_needaction" invisible="1"/>
                                </tree>
                             </field>
                        </page>
                    </notebook>

	                <footer>
	                    <button string="Create" name="close_dialog" type="object" class="btn-primary"/>
	                    <button string="Discard" class="btn-default" special="cancel"/>
	                </footer>
                </xpath>
            </field>
        </record>
        
	    <record model="ir.ui.view" id="crm_case_form_view_oppor_extended_hm1">
	        <field name="name">crm.case.form.view.oppor.extended</field>
	        <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
	        <field name="model">crm.lead</field>
	        <field name="arch" type="xml">
	            <field name="next_activity_id" position="attributes">
	                <attribute name="options">{}</attribute>
	            </field>
<!-- 	            <field name="title_action" position="attributes">
	                <attribute name="invisible">1</attribute>
	            </field> -->
            </field>
        </record>
        
        <record model="ir.ui.view" id="crm_opportunity_hm_filter">
            <field name="name">crm.opportunity.filter.today</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.view_crm_case_opportunities_filter"/>
            <field name="arch" type="xml">

                <filter name="today" position="before">
                    <filter string="Today" name="todal_pipeline" domain="[('creation_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))), ('creation_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]"/>
                    <filter string="Yesterday" name="yesterday" domain="[('creation_date','&lt;=', datetime.datetime.combine(context_today()-datetime.timedelta(days=1), datetime.time(23,59,59))), ('creation_date','&gt;=', datetime.datetime.combine(context_today()-datetime.timedelta(days=1), datetime.time(0,0,0)))]"/>
                    <filter string="Last week" domain="[('creation_date', '&gt;=', ((context_today()+relativedelta(weeks=-2,days=1, weekday=0)).strftime('%Y-%m-%d'))),('creation_date', '&lt;=', ((context_today()+relativedelta(weeks=-1,weekday=6)).strftime('%Y-%m-%d')))]"/>
                    <filter string="This Week" name="currentandlastlastweeks" domain="[ ('creation_date','&gt;=',(context_today()+relativedelta(weeks=-1,days=1,weekday=0)).strftime('%Y-%m-%d')), ('creation_date','&lt;',(context_today()+relativedelta(weekday=6)).strftime('%Y-%m-%d'))]"/>
                    <filter string="This Month" name="thismonth" domain="[('creation_date','&lt;',(context_today()+relativedelta(months=1)).strftime('%Y-%m-01')), ('creation_date','&gt;=',time.strftime('%Y-%m-01'))]"/>
                    <filter string="Last Month" domain="[('creation_date','&lt;',(context_today()).strftime('%Y-%m-01')), ('creation_date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%Y-%m-01'))]"/>
                </filter>
                
            </field>
        </record>

</odoo>
        